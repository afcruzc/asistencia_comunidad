{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddEditPersonModal=_ref=>{let{onClose,onSave,groups,personToEdit}=_ref;const[personName,setPersonName]=useState('');const[selectedGroups,setSelectedGroups]=useState([]);const[isSaving,setIsSaving]=useState(false);const[error,setError]=useState('');useEffect(()=>{if(personToEdit){setPersonName(personToEdit.name);setSelectedGroups(personToEdit.groupIds||[]);}else{setPersonName('');setSelectedGroups([]);}setError('');},[personToEdit]);const handleGroupChange=groupId=>{setSelectedGroups(prevSelected=>{if(prevSelected.includes(groupId)){return prevSelected.filter(id=>id!==groupId);}else{return[...prevSelected,groupId];}});};const handleSave=async()=>{if(personName.trim()){setIsSaving(true);setError('');const dataToSave={name:personName,groupIds:selectedGroups};if(personToEdit&&personToEdit._id){dataToSave._id=personToEdit._id;}try{await onSave(dataToSave);onClose();}catch(err){if(err.message&&err.message.includes('Ya existe')){setError('Ya existe una persona con ese nombre o ID.');}else{setError('Error al guardar la persona.');}}finally{setIsSaving(false);}}else{setError('Por favor, ingresa el nombre de la persona.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-6 text-center\",children:personToEdit?'Editar Persona':'Agregar Nueva Persona'}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nombre de la Persona\",value:personName,onChange:e=>setPersonName(e.target.value),className:\"w-full px-4 py-3 mb-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-lg font-medium mb-2\",children:\"Selecciona Grupos:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2\",children:groups.map(group=>{const groupId=group.id||group._id;return/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 bg-gray-50 p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedGroups.includes(groupId),onChange:()=>handleGroupChange(groupId),className:\"form-checkbox h-5 w-5 text-blue-600 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-800\",children:group.name})]},groupId);})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm bg-red-50 p-3 rounded-lg mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-6 py-3 bg-gray-200 text-gray-800 rounded-xl hover:bg-gray-300 transition-colors font-semibold\",disabled:isSaving,children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,className:\"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-semibold\",disabled:isSaving,children:isSaving?'Guardando...':personToEdit?'Guardar Cambios':'Guardar Persona'})]})]})});};export default AddEditPersonModal;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AddEditPersonModal","_ref","onClose","onSave","groups","personToEdit","personName","setPersonName","selectedGroups","setSelectedGroups","isSaving","setIsSaving","error","setError","name","groupIds","handleGroupChange","groupId","prevSelected","includes","filter","id","handleSave","trim","dataToSave","_id","err","message","className","children","type","placeholder","value","onChange","e","target","map","group","checked","onClick","disabled"],"sources":["c:/Users/afcru/Downloads/project/src/components/AddEditPersonModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst AddEditPersonModal = ({ onClose, onSave, groups, personToEdit }) => {\n  const [personName, setPersonName] = useState('');\n  const [selectedGroups, setSelectedGroups] = useState([]);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (personToEdit) {\n      setPersonName(personToEdit.name);\n      setSelectedGroups(personToEdit.groupIds || []);\n    } else {\n      setPersonName('');\n      setSelectedGroups([]);\n    }\n    setError('');\n  }, [personToEdit]);\n\n  const handleGroupChange = (groupId) => {\n    setSelectedGroups(prevSelected => {\n      if (prevSelected.includes(groupId)) {\n        return prevSelected.filter(id => id !== groupId);\n      } else {\n        return [...prevSelected, groupId];\n      }\n    });\n  };\n\n  const handleSave = async () => {\n    if (personName.trim()) {\n      setIsSaving(true);\n      setError('');\n      const dataToSave = {\n        name: personName,\n        groupIds: selectedGroups,\n      };\n      if (personToEdit && personToEdit._id) {\n        dataToSave._id = personToEdit._id;\n      }\n      try {\n        await onSave(dataToSave);\n        onClose();\n      } catch (err) {\n        if (err.message && err.message.includes('Ya existe')) {\n          setError('Ya existe una persona con ese nombre o ID.');\n        } else {\n          setError('Error al guardar la persona.');\n        }\n      } finally {\n        setIsSaving(false);\n      }\n    } else {\n      setError('Por favor, ingresa el nombre de la persona.');\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white p-6 rounded-2xl shadow-2xl w-full max-w-md transform transition-all duration-300 scale-100 opacity-100\">\n        <h2 className=\"text-2xl font-bold text-gray-800 mb-6 text-center\">\n          {personToEdit ? 'Editar Persona' : 'Agregar Nueva Persona'}\n        </h2>\n        <input\n          type=\"text\"\n          placeholder=\"Nombre de la Persona\"\n          value={personName}\n          onChange={(e) => setPersonName(e.target.value)}\n          className=\"w-full px-4 py-3 mb-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n        />\n        <div className=\"mb-6\">\n          <label className=\"block text-gray-700 text-lg font-medium mb-2\">Selecciona Grupos:</label>\n          <div className=\"grid grid-cols-2 gap-2\">\n            {groups.map((group) => {\n              const groupId = group.id || group._id;\n              return (\n                <label key={groupId} className=\"flex items-center space-x-2 bg-gray-50 p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedGroups.includes(groupId)}\n                    onChange={() => handleGroupChange(groupId)}\n                    className=\"form-checkbox h-5 w-5 text-blue-600 rounded\"\n                  />\n                  <span className=\"text-gray-800\">{group.name}</span>\n                </label>\n              );\n            })}\n          </div>\n        </div>\n        {error && (\n          <div className=\"text-red-600 text-sm bg-red-50 p-3 rounded-lg mb-4\">\n            {error}\n          </div>\n        )}\n        <div className=\"flex justify-end space-x-4\">\n          <button\n            onClick={onClose}\n            className=\"px-6 py-3 bg-gray-200 text-gray-800 rounded-xl hover:bg-gray-300 transition-colors font-semibold\"\n            disabled={isSaving}\n          >\n            Cancelar\n          </button>\n          <button\n            onClick={handleSave}\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-semibold\"\n            disabled={isSaving}\n          >\n            {isSaving ? 'Guardando...' : personToEdit ? 'Guardar Cambios' : 'Guardar Persona'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AddEditPersonModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}