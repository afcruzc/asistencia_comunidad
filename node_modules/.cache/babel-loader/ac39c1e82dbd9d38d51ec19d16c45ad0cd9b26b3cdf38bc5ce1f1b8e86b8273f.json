{"ast":null,"code":"import React from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PersonDashboardView=_ref=>{let{person,meetings,groups}=_ref;const formatDate=dateString=>{// Asume que dateString ya está en formato YYYY-MM-DD\nconst[year,month,day]=dateString.split('-');const date=new Date(year,month-1,day);// month - 1 porque los meses en JS son de 0-11\nconst options={year:'numeric',month:'long',day:'numeric'};return date.toLocaleDateString('es-ES',options);};const statusColors={Asistió:'bg-green-100 text-green-800',Excusa:'bg-yellow-100 text-yellow-800',Inasistió:'bg-red-100 text-red-800','No Registrado':'bg-gray-100 text-gray-800'};const personGroups=groups.filter(g=>person.groupIds&&person.groupIds.includes(g.id));const groupNames=personGroups.map(g=>g.name).join(', ');const getConsolidatedAttendanceSummary=()=>{let attended=0;let excused=0;let unexcused=0;let totalMeetings=0;meetings.forEach(meeting=>{const attendanceRecord=meeting.attendance.find(att=>att.personId===person.id);if(attendanceRecord){totalMeetings++;const status=attendanceRecord.status;if(status==='Asistió'){attended++;}else if(status==='Excusa'){excused++;}else if(status==='Inasistió'){unexcused++;}}});return{Asistió:attended,Excusa:excused,Inasistió:unexcused,total:totalMeetings};};const summary=getConsolidatedAttendanceSummary();const data=[{label:'Asistió',value:summary.Asistió,color:'bg-green-500'},{label:'Excusa',value:summary.Excusa,color:'bg-yellow-500'},{label:'Inasistió',value:summary.Inasistió,color:'bg-red-500'}];const totalMeetingsAttended=summary.total;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4 text-center\",children:person.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-center mb-8\",children:[\"Grupos: \",groupNames||'N/A']}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Dashboard Consolidado de Asistencia\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-2xl shadow-lg mb-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"Resumen General de Asistencia\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6\",children:[\"Total de reuniones registradas para \",person.name,\": \",totalMeetingsAttended]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\",children:data.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`p-4 rounded-xl text-white ${item.color} shadow-md`,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:item.label}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold mt-1\",children:item.value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1\",children:totalMeetingsAttended>0?`${(item.value/totalMeetingsAttended*100).toFixed(1)}%`:'0%'})]},index))}),totalMeetingsAttended>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-full bg-gray-200 rounded-full h-6 overflow-hidden shadow-inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-green-500 float-left transition-all duration-500\",style:{width:`${summary.Asistió/totalMeetingsAttended*100}%`}}),/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-yellow-500 float-left transition-all duration-500\",style:{width:`${summary.Excusa/totalMeetingsAttended*100}%`}}),/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-red-500 float-left transition-all duration-500\",style:{width:`${summary.Inasistió/totalMeetingsAttended*100}%`}})]}),totalMeetingsAttended===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 mt-4\",children:\"No hay datos de asistencia para esta persona en ninguna reuni\\xF3n.\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4\",children:\"Historial de Asistencia a Reuniones\"}),meetings.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:meetings.map(meeting=>{const attendanceRecord=meeting.attendance.find(att=>att.personId===person.id);const status=attendanceRecord?attendanceRecord.status:'No Registrado';const excuse=attendanceRecord?attendanceRecord.excuse:'';return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-xl shadow-md flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800\",children:meeting.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Fecha: \",formatDate(meeting.date)]}),status==='Excusa'&&excuse&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1 italic\",children:[\"Motivo: \",excuse]})]}),/*#__PURE__*/_jsx(\"span\",{className:`px-4 py-2 rounded-full text-sm font-semibold ${statusColors[status]}`,children:status})]},meeting.id);})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"No hay reuniones registradas a\\xFAn.\"})]});};export default PersonDashboardView;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","PersonDashboardView","_ref","person","meetings","groups","formatDate","dateString","year","month","day","split","date","Date","options","toLocaleDateString","statusColors","Asistió","Excusa","Inasistió","personGroups","filter","g","groupIds","includes","id","groupNames","map","name","join","getConsolidatedAttendanceSummary","attended","excused","unexcused","totalMeetings","forEach","meeting","attendanceRecord","attendance","find","att","personId","status","total","summary","data","label","value","color","totalMeetingsAttended","className","children","item","index","toFixed","style","width","length","excuse"],"sources":["c:/Users/afcru/Downloads/project/src/components/PersonDashboardView.js"],"sourcesContent":["import React from 'react';\n\nconst PersonDashboardView = ({ person, meetings, groups }) => {\n  const formatDate = (dateString) => {\n    // Asume que dateString ya está en formato YYYY-MM-DD\n    const [year, month, day] = dateString.split('-');\n    const date = new Date(year, month - 1, day); // month - 1 porque los meses en JS son de 0-11\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\n    return date.toLocaleDateString('es-ES', options);\n  };\n\n  const statusColors = {\n    Asistió: 'bg-green-100 text-green-800',\n    Excusa: 'bg-yellow-100 text-yellow-800',\n    Inasistió: 'bg-red-100 text-red-800',\n    'No Registrado': 'bg-gray-100 text-gray-800',\n  };\n\n  const personGroups = groups.filter(g => person.groupIds && person.groupIds.includes(g.id));\n  const groupNames = personGroups.map(g => g.name).join(', ');\n\n  const getConsolidatedAttendanceSummary = () => {\n    let attended = 0;\n    let excused = 0;\n    let unexcused = 0;\n    let totalMeetings = 0;\n\n    meetings.forEach(meeting => {\n      const attendanceRecord = meeting.attendance.find(att => att.personId === person.id);\n      if (attendanceRecord) {\n        totalMeetings++;\n        const status = attendanceRecord.status;\n        if (status === 'Asistió') {\n          attended++;\n        } else if (status === 'Excusa') {\n          excused++;\n        } else if (status === 'Inasistió') {\n          unexcused++;\n        }\n      }\n    });\n\n    return {\n      Asistió: attended,\n      Excusa: excused,\n      Inasistió: unexcused,\n      total: totalMeetings\n    };\n  };\n\n  const summary = getConsolidatedAttendanceSummary();\n\n  const data = [\n    { label: 'Asistió', value: summary.Asistió, color: 'bg-green-500' },\n    { label: 'Excusa', value: summary.Excusa, color: 'bg-yellow-500' },\n    { label: 'Inasistió', value: summary.Inasistió, color: 'bg-red-500' },\n  ];\n\n  const totalMeetingsAttended = summary.total;\n\n  return (\n    <div className=\"p-4\">\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-4 text-center\">{person.name}</h2>\n      <p className=\"text-gray-600 text-center mb-8\">Grupos: {groupNames || 'N/A'}</p>\n\n      <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Dashboard Consolidado de Asistencia</h3>\n      <div className=\"bg-white p-6 rounded-2xl shadow-lg mb-8\">\n        <h4 className=\"text-lg font-semibold text-gray-800 mb-4\">Resumen General de Asistencia</h4>\n        <p className=\"text-gray-600 mb-6\">Total de reuniones registradas para {person.name}: {totalMeetingsAttended}</p>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n          {data.map((item, index) => (\n            <div key={index} className={`p-4 rounded-xl text-white ${item.color} shadow-md`}>\n              <p className=\"text-sm font-medium\">{item.label}</p>\n              <p className=\"text-3xl font-bold mt-1\">{item.value}</p>\n              <p className=\"text-xs mt-1\">\n                {totalMeetingsAttended > 0 ? `${((item.value / totalMeetingsAttended) * 100).toFixed(1)}%` : '0%'}\n              </p>\n            </div>\n          ))}\n        </div>\n\n        {totalMeetingsAttended > 0 && (\n          <div className=\"w-full bg-gray-200 rounded-full h-6 overflow-hidden shadow-inner\">\n            <div\n              className=\"h-full bg-green-500 float-left transition-all duration-500\"\n              style={{ width: `${(summary.Asistió / totalMeetingsAttended) * 100}%` }}\n            ></div>\n            <div\n              className=\"h-full bg-yellow-500 float-left transition-all duration-500\"\n              style={{ width: `${(summary.Excusa / totalMeetingsAttended) * 100}%` }}\n            ></div>\n            <div\n              className=\"h-full bg-red-500 float-left transition-all duration-500\"\n              style={{ width: `${(summary.Inasistió / totalMeetingsAttended) * 100}%` }}\n            ></div>\n          </div>\n        )}\n        {totalMeetingsAttended === 0 && (\n          <p className=\"text-center text-gray-500 mt-4\">No hay datos de asistencia para esta persona en ninguna reunión.</p>\n        )}\n      </div>\n\n      <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Historial de Asistencia a Reuniones</h3>\n      {meetings.length > 0 ? (\n        <div className=\"space-y-4\">\n          {meetings.map(meeting => {\n            const attendanceRecord = meeting.attendance.find(att => att.personId === person.id);\n            const status = attendanceRecord ? attendanceRecord.status : 'No Registrado';\n            const excuse = attendanceRecord ? attendanceRecord.excuse : '';\n            return (\n              <div key={meeting.id} className=\"bg-white p-4 rounded-xl shadow-md flex items-center justify-between\">\n                <div>\n                  <h4 className=\"text-lg font-medium text-gray-800\">{meeting.name}</h4>\n                  <p className=\"text-sm text-gray-500\">Fecha: {formatDate(meeting.date)}</p>\n                  {status === 'Excusa' && excuse && (\n                    <p className=\"text-xs text-gray-500 mt-1 italic\">Motivo: {excuse}</p>\n                  )}\n                </div>\n                <span className={`px-4 py-2 rounded-full text-sm font-semibold ${statusColors[status]}`}>\n                  {status}\n                </span>\n              </div>\n            );\n          })}\n        </div>\n      ) : (\n        <p className=\"text-center text-gray-500\">No hay reuniones registradas aún.</p>\n      )}\n    </div>\n  );\n};\n\nexport default PersonDashboardView;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,mBAAmB,CAAGC,IAAA,EAAkC,IAAjC,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,MAAO,CAAC,CAAAH,IAAA,CACvD,KAAM,CAAAI,UAAU,CAAIC,UAAU,EAAK,CACjC;AACA,KAAM,CAACC,IAAI,CAAEC,KAAK,CAAEC,GAAG,CAAC,CAAGH,UAAU,CAACI,KAAK,CAAC,GAAG,CAAC,CAChD,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACL,IAAI,CAAEC,KAAK,CAAG,CAAC,CAAEC,GAAG,CAAC,CAAE;AAC7C,KAAM,CAAAI,OAAO,CAAG,CAAEN,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,MAAM,CAAEC,GAAG,CAAE,SAAU,CAAC,CAClE,MAAO,CAAAE,IAAI,CAACG,kBAAkB,CAAC,OAAO,CAAED,OAAO,CAAC,CAClD,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,CACnBC,OAAO,CAAE,6BAA6B,CACtCC,MAAM,CAAE,+BAA+B,CACvCC,SAAS,CAAE,yBAAyB,CACpC,eAAe,CAAE,2BACnB,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGf,MAAM,CAACgB,MAAM,CAACC,CAAC,EAAInB,MAAM,CAACoB,QAAQ,EAAIpB,MAAM,CAACoB,QAAQ,CAACC,QAAQ,CAACF,CAAC,CAACG,EAAE,CAAC,CAAC,CAC1F,KAAM,CAAAC,UAAU,CAAGN,YAAY,CAACO,GAAG,CAACL,CAAC,EAAIA,CAAC,CAACM,IAAI,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAE3D,KAAM,CAAAC,gCAAgC,CAAGA,CAAA,GAAM,CAC7C,GAAI,CAAAC,QAAQ,CAAG,CAAC,CAChB,GAAI,CAAAC,OAAO,CAAG,CAAC,CACf,GAAI,CAAAC,SAAS,CAAG,CAAC,CACjB,GAAI,CAAAC,aAAa,CAAG,CAAC,CAErB9B,QAAQ,CAAC+B,OAAO,CAACC,OAAO,EAAI,CAC1B,KAAM,CAAAC,gBAAgB,CAAGD,OAAO,CAACE,UAAU,CAACC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,QAAQ,GAAKtC,MAAM,CAACsB,EAAE,CAAC,CACnF,GAAIY,gBAAgB,CAAE,CACpBH,aAAa,EAAE,CACf,KAAM,CAAAQ,MAAM,CAAGL,gBAAgB,CAACK,MAAM,CACtC,GAAIA,MAAM,GAAK,SAAS,CAAE,CACxBX,QAAQ,EAAE,CACZ,CAAC,IAAM,IAAIW,MAAM,GAAK,QAAQ,CAAE,CAC9BV,OAAO,EAAE,CACX,CAAC,IAAM,IAAIU,MAAM,GAAK,WAAW,CAAE,CACjCT,SAAS,EAAE,CACb,CACF,CACF,CAAC,CAAC,CAEF,MAAO,CACLhB,OAAO,CAAEc,QAAQ,CACjBb,MAAM,CAAEc,OAAO,CACfb,SAAS,CAAEc,SAAS,CACpBU,KAAK,CAAET,aACT,CAAC,CACH,CAAC,CAED,KAAM,CAAAU,OAAO,CAAGd,gCAAgC,CAAC,CAAC,CAElD,KAAM,CAAAe,IAAI,CAAG,CACX,CAAEC,KAAK,CAAE,SAAS,CAAEC,KAAK,CAAEH,OAAO,CAAC3B,OAAO,CAAE+B,KAAK,CAAE,cAAe,CAAC,CACnE,CAAEF,KAAK,CAAE,QAAQ,CAAEC,KAAK,CAAEH,OAAO,CAAC1B,MAAM,CAAE8B,KAAK,CAAE,eAAgB,CAAC,CAClE,CAAEF,KAAK,CAAE,WAAW,CAAEC,KAAK,CAAEH,OAAO,CAACzB,SAAS,CAAE6B,KAAK,CAAE,YAAa,CAAC,CACtE,CAED,KAAM,CAAAC,qBAAqB,CAAGL,OAAO,CAACD,KAAK,CAE3C,mBACE3C,KAAA,QAAKkD,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBrD,IAAA,OAAIoD,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAEhD,MAAM,CAACyB,IAAI,CAAK,CAAC,cACpF5B,KAAA,MAAGkD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,EAAC,UAAQ,CAACzB,UAAU,EAAI,KAAK,EAAI,CAAC,cAE/E5B,IAAA,OAAIoD,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,qCAAmC,CAAI,CAAC,cACjGnD,KAAA,QAAKkD,SAAS,CAAC,yCAAyC,CAAAC,QAAA,eACtDrD,IAAA,OAAIoD,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,+BAA6B,CAAI,CAAC,cAC3FnD,KAAA,MAAGkD,SAAS,CAAC,oBAAoB,CAAAC,QAAA,EAAC,sCAAoC,CAAChD,MAAM,CAACyB,IAAI,CAAC,IAAE,CAACqB,qBAAqB,EAAI,CAAC,cAEhHnD,IAAA,QAAKoD,SAAS,CAAC,4CAA4C,CAAAC,QAAA,CACxDN,IAAI,CAAClB,GAAG,CAAC,CAACyB,IAAI,CAAEC,KAAK,gBACpBrD,KAAA,QAAiBkD,SAAS,CAAE,6BAA6BE,IAAI,CAACJ,KAAK,YAAa,CAAAG,QAAA,eAC9ErD,IAAA,MAAGoD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAEC,IAAI,CAACN,KAAK,CAAI,CAAC,cACnDhD,IAAA,MAAGoD,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAEC,IAAI,CAACL,KAAK,CAAI,CAAC,cACvDjD,IAAA,MAAGoD,SAAS,CAAC,cAAc,CAAAC,QAAA,CACxBF,qBAAqB,CAAG,CAAC,CAAG,GAAG,CAAEG,IAAI,CAACL,KAAK,CAAGE,qBAAqB,CAAI,GAAG,EAAEK,OAAO,CAAC,CAAC,CAAC,GAAG,CAAG,IAAI,CAChG,CAAC,GALID,KAML,CACN,CAAC,CACC,CAAC,CAELJ,qBAAqB,CAAG,CAAC,eACxBjD,KAAA,QAAKkD,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAC/ErD,IAAA,QACEoD,SAAS,CAAC,4DAA4D,CACtEK,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAIZ,OAAO,CAAC3B,OAAO,CAAGgC,qBAAqB,CAAI,GAAG,GAAI,CAAE,CACpE,CAAC,cACPnD,IAAA,QACEoD,SAAS,CAAC,6DAA6D,CACvEK,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAIZ,OAAO,CAAC1B,MAAM,CAAG+B,qBAAqB,CAAI,GAAG,GAAI,CAAE,CACnE,CAAC,cACPnD,IAAA,QACEoD,SAAS,CAAC,0DAA0D,CACpEK,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAIZ,OAAO,CAACzB,SAAS,CAAG8B,qBAAqB,CAAI,GAAG,GAAI,CAAE,CACtE,CAAC,EACJ,CACN,CACAA,qBAAqB,GAAK,CAAC,eAC1BnD,IAAA,MAAGoD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,qEAAgE,CAAG,CAClH,EACE,CAAC,cAENrD,IAAA,OAAIoD,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,qCAAmC,CAAI,CAAC,CAChG/C,QAAQ,CAACqD,MAAM,CAAG,CAAC,cAClB3D,IAAA,QAAKoD,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB/C,QAAQ,CAACuB,GAAG,CAACS,OAAO,EAAI,CACvB,KAAM,CAAAC,gBAAgB,CAAGD,OAAO,CAACE,UAAU,CAACC,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,QAAQ,GAAKtC,MAAM,CAACsB,EAAE,CAAC,CACnF,KAAM,CAAAiB,MAAM,CAAGL,gBAAgB,CAAGA,gBAAgB,CAACK,MAAM,CAAG,eAAe,CAC3E,KAAM,CAAAgB,MAAM,CAAGrB,gBAAgB,CAAGA,gBAAgB,CAACqB,MAAM,CAAG,EAAE,CAC9D,mBACE1D,KAAA,QAAsBkD,SAAS,CAAC,qEAAqE,CAAAC,QAAA,eACnGnD,KAAA,QAAAmD,QAAA,eACErD,IAAA,OAAIoD,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAEf,OAAO,CAACR,IAAI,CAAK,CAAC,cACrE5B,KAAA,MAAGkD,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,SAAO,CAAC7C,UAAU,CAAC8B,OAAO,CAACxB,IAAI,CAAC,EAAI,CAAC,CACzE8B,MAAM,GAAK,QAAQ,EAAIgB,MAAM,eAC5B1D,KAAA,MAAGkD,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAAC,UAAQ,CAACO,MAAM,EAAI,CACrE,EACE,CAAC,cACN5D,IAAA,SAAMoD,SAAS,CAAE,gDAAgDlC,YAAY,CAAC0B,MAAM,CAAC,EAAG,CAAAS,QAAA,CACrFT,MAAM,CACH,CAAC,GAVCN,OAAO,CAACX,EAWb,CAAC,CAEV,CAAC,CAAC,CACC,CAAC,cAEN3B,IAAA,MAAGoD,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,sCAAiC,CAAG,CAC9E,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlD,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}